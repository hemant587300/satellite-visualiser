var DAAC_LINKS=[{text:"ASDC",title:"Atmospheric Science Data Center (ASDC)",link:"https://asdc.larc.nasa.gov"},{text:"ASF DAAC",title:"Alaska Satellite Facility (ASF) Distributed Active Archive Center (DAAC)",link:"https://asf.alaska.edu/asfsardaac/"},{text:"CDDIS",title:"Crustal Dynamics Data Information System (CDDIS)",link:"https://cddis.nasa.gov"},{text:"GES DISC",title:"Goddard Earth Sciences Data and Information Services Center (GES DISC)",link:"https://daac.gsfc.nasa.gov"},{text:"GHRC DAAC",
title:"Global Hydrology Resource Center (GHRC) Distributed Active Archive Center (DAAC)",link:"https://ghrc.nsstc.nasa.gov/home"},{text:"LAADS DAAC",title:"Level 1 Atmosphere Archive and Distribution System (LAADS) Distributed Active Archive Center (DAAC)",link:"https://ladsweb.modaps.eosdis.nasa.gov"},{text:"LP DAAC",title:"Land Processes Distributed Active Archive Center (LP DAAC)",link:"https://lpdaac.usgs.gov"},{text:"NSIDC DAAC",title:"National Snow and Ice Data Center (NSIDC) Distributed Active Archive Center (DAAC)",
link:"https://nsidc.org/data/data-programs/nsidc-daac"},{text:"OB.DAAC",title:"Ocean Biology Distributed Active Archive Center (OB.DAAC)",link:"https://oceancolor.gsfc.nasa.gov"},{text:"ORNL DAAC",title:"Oak Ridge National Laboratory (ORNL) Distributed Active Archive Center (DAAC)",link:"http://daac.ornl.gov"},{text:"PO.DAAC",title:"Physical Oceanography Distributed Active Archive Center (PO.DAAC)",link:"http://podaac.jpl.nasa.gov"},{text:"SEDAC",title:"Socioeconomic Data and Applications Data Center (SEDAC)",
link:"http://sedac.ciesin.columbia.edu"}],STATUS_API_URL="//status.earthdata.nasa.gov/api/v1/notifications";(function(){function w(a){var k=function(c,t){function n(l){if(sessionStorage){var d=String(l.id)+String((new Date(l.updated_at)).getTime()),c=sessionStorage.getItem("th2_banner_uid");if(d==c)return}a(b.BANNER_STATUS_PANEL).empty();var d=a("<div>").addClass("th-entry-div-outage"),c=a("<div>").addClass("th-left th-banner"),g=a("<div>").addClass("th-right banner"),e=a("<span>").html("<b>Outage:</b> "+l.message),z=a("<a>").attr("href","#").attr("id","th-banner-close-button").attr("title","Prevent this message from being automatically displayed").addClass("banner-close-button").html("<span>Dismiss</span>").click(function(){a(b.BANNER_STATUS_PANEL).hide();
var d=String(l.id)+String((new Date(l.updated_at)).getTime());sessionStorage.setItem("th2_banner_uid",d)}),A=a("<div>").addClass("dismiss-spacer");d.append(c).append(g);g.append(e).append(A).append(z);a(b.BANNER_STATUS_PANEL).append(d).show()}var b=this;window.$tophat=b;this.HELP_LINK=this.FBM_LINK=this.BANNER_STATUS_PANEL=this.NOTIF_CIRCLE=this.STATUS_LINK=null;var k,g,f,p,h,m,e=[],q={},r={type:"empty",sortKey:"a",message:"No notifications available.",id:"0",updated_at:"0"},x={type:"empty",sortKey:"a",
message:"ERROR: Notifications could not be retrieved due to a problem communicating with the service.",id:"0",updated_at:"0"};CONFIG={showStatusPanel:!1,showFeedbackPanel:!1,showDaacLinksPanel:!0,daacLinks:[],currentDaac:null,fbmSubjectLine:null,statusPollingInterval:0,minimumStatusPollingInterval:10,statusApiUrl:"",useFontAwesome:!0};t.hasOwnProperty("currentDomain")?this.THIS_DOMAIN=t.currentDomain:this.THIS_DOMAIN=document.location.origin;var u={banner:"a",outage:"b",alert:"c",message:"d"};"object"===
typeof c&&(a.extend(CONFIG,t),null==CONFIG.statusPollingInterval&&(CONFIG.statusPollingInterval=CONFIG.minimumStatusPollingInterval));this.addStatusEntry=function(a){100>e.length&&(e.push(a),q[a.id]={},q[a.id].seen=!1,q[a.id].updated_at=a.updated_at);var b=s();b.hasOwnProperty(a.id)&&!0==b[a.id].seen&&(q[a.id].seen=q[a.id].updated_at!==b[a.id].updated_at?!1:!0)};this.getStatusEntries=function(){return e};this.buildStatusEntries=function(){a(g).empty();a(".th-entry-div").hasClass("th-empty")||(e=e.sort(function(a,
b){return a.sortKey>b.sortKey?1:a.sortKey<b.sortKey?-1:0}),a.each(e,function(b,d){var c=a("<div>").addClass("th-entry-div-"+d.type),e;if("empty"===d.type)a(c).addClass("th-"+d.type),e=d.message;else{var f=a("<div>").addClass("th-"+d.type);a(f).addClass("th-"+d.type);e="<b>"+("banner"==d.type?"Outage":d.type)+"</b>: "+d.message;a(c).append(f)}e=a("<div>").addClass("th-right").html(e);"banner"==d.type&&e.addClass("banner");a(c).append(e);a(g).append(c)}))};this.setUnreadCount=function(a){sessionStorage.setItem("unreadNotifs",
a)};this.getUnreadCount=function(){return parseInt(sessionStorage.getItem("unreadNotifs"))};this.addTestEntry=function(a,c){var e=(new Date).getTime(),e={message:a,type:c,id:e};b.setUnreadCount(b.getUnreadCount()+1);b.addStatusEntry(e);b.showNotifCircle();b.buildStatusEntries();b.showNotifCircle()};this.clearAllEntries=function(){a(g).empty();b.setUnreadCount(0);e=[];b.showNotifCircle()};this.init=function(){f=a("<div>").attr("id","earthdata-tophat2");var l=a("<div>").attr("class","th-wrapper"),d=
a("<div>").addClass("th-left-section");a(f).append(d);b.setupLeftTitle();b.setupHelp();b.setupStatus();v();b.setupDaacLinks();a("#earthdata-tophat2").remove();a(c).prepend(f);this.buildStatusEntries();b.addCloseOnDocClick(h,g,b.BANNER_STATUS_PANEL,void 0,k);sessionStorage&&(null===sessionStorage.getItem("statusChecked")?sessionStorage.setItem("statusChecked","false"):sessionStorage.getItem("statusChecked"));CONFIG.showStatusPanel&&(y(),0<CONFIG.statusPollingInterval&&setInterval(function(){y()},6E4*
CONFIG.statusPollingInterval));a(f).wrap(l);return f};this.setupLeftTitle=function(){if(CONFIG.appTitle&&!CONFIG.appTitle.match(/^\s+$/))var b=CONFIG.appLink&&!CONFIG.appLink.match(/^\s+$/)?"<a href= "+CONFIG.appLink+" id='th-home-link'>| EARTHDATA":"<a href="+window.location.origin+" id='th-home-link'>| EARTHDATA",b=b+("<span class='th-app-title' id='th-app-title'>"+CONFIG.appTitle+"</span></a>");else b="<a href="+window.location.origin+" id='th-home-link'>| EARTH<b>DATA<b></a>";b=a("<div>").attr("class",
"th-left-title").html(b);a(f).find(".th-left-section").append(b)};this.showNotifCircle=function(){var l=b.getUnreadCount();0<l?(a(b.NOTIF_CIRCLE).text(l),a(b.NOTIF_CIRCLE).css("visibility","visible"),9<l?a(b.NOTIF_CIRCLE).addClass("th-notif-pill"):a(b.NOTIF_CIRCLE).removeClass("th-notif-pill")):a(b.NOTIF_CIRCLE).css("visibility","hidden")};this.renderLeftMenuPanel=function(){var b=a(p).closest(".th-link-container");a(".th-menu-panel").not(h).hide();a(".th-link-container").not(b).removeClass("th-active-cell");
"true"==a(h).attr("data-open")?(a(h).hide(),a(h).attr("data-open","false"),a(p).closest(".th-link-container").removeClass("th-active-cell")):(a(h).show(),a(h).attr("data-open","true"),a(p).closest(".th-link-container").addClass("th-active-cell"))};this.renderRightMenuPanel=function(c,d){var f=a(c).closest(".th-link-container");a(".th-menu-panel").not(d).hide();a(".th-link-container").not(f).removeClass("th-active-cell");"true"==a(d).attr("data-open")?(a(d).hide(),a(d).attr("data-open","false"),a(c).closest(".th-link-container").removeClass("th-active-cell")):
(a(d).show(),a(d).attr("data-open","true"),a(c).closest(".th-link-container").not(".th-fbm-link-container").addClass("th-active-cell"));if(a(d).hasClass("th-status-panel"))if(a(b.NOTIF_CIRCLE).css("visibility","hidden"),sessionStorage&&(sessionStorage.setItem("statusChecked","true"),b.setUnreadCount(0),f=s(),a.each(f,function(a,b){b.seen=!0}),sessionStorage.setItem("seenEntries",JSON.stringify(f))),6<e.length){a(g).addClass("th-scrolled");var h=0;a(g).find(".th-entry-div:lt(6)").each(function(){h+=
a(this).height()});a(g).css("th-height",h+"px")}else a(g).removeClass("th-scrolled"),a(g).css("th-height","")};this.addCloseOnDocClick=function(){a.each(arguments,function(b,c){a(document).click(function(b){0<!a(b.target).closest(f).length&&(a(c).hide(),a(".th-link-container").removeClass("th-active-cell"),a(m).css("position","relative"))})})};this.setupDaacLinks=function(){if(!1!==CONFIG.showDaacLinksPanel){var c=a("<div>").addClass("th-link-container th-menu-section"),d;d=null===CONFIG.currentDaac?
"Find a DAAC":"Other DAACs";p=a("<a>").attr({href:"javascript:void(0);",id:"daac-links-header"}).html(d).click(b.renderLeftMenuPanel);d=a("<span>").attr("class","th-arrow").html("&#x25BE");a(p).append(d);a(c).append(p);h=a("<div>").addClass("th-menu-panel th-daac-links");var e=a("<ul>");a.each(CONFIG.daacLinks,function(b,c){var l=c.text,l=a("<a>").attr("title",c.title).attr("href",c.link).attr("target","_blank").html(l).addClass("daac-link");c.text===CONFIG.currentDaac&&l.addClass("current-daac");
l.click(function(a){var b=new URL(a.target.href);a.target.href=b.origin+b.pathname});l.focus(function(a){var b=new URL(a.target.href);a.target.href=b.origin+b.pathname});var d=a("<li>");a(d).append(l);a(e).append(d)});a(h).append(e);a(p).append(h);a(f).append(c)}};this.setupStatus=function(){!1!==CONFIG.showStatusPanel&&(b.STATUS_LINK=a("<a>").attr("href","javascript:void(0);").addClass("th-right-panel-link").addClass("th-status-link").click(function(){b.renderRightMenuPanel(b.STATUS_LINK,g)}),b.NOTIF_CIRCLE=
a("<span>").addClass("th-notif-circle").text("0").css("visibility","hidden").click(function(){b.renderRightMenuPanel(b.STATUS_LINK,g)}),g=a("<div>").addClass("th-menu-panel th-status-panel"),m=a("<div>").addClass("th-link-container th-status-link-container").attr("id","th-status-link"),b.BANNER_STATUS_PANEL=a("<div>").addClass("th-menu-panel th-status-panel").attr("id","th-banner-status-panel").css("display","none"),a(m).append(b.BANNER_STATUS_PANEL),a(b.STATUS_LINK).append(g),a(m).append(b.STATUS_LINK),
a(m).append(b.NOTIF_CIRCLE),a(f).append(m))};var v=function(){if(!1!==CONFIG.showFeedbackPanel){b.FBM_LINK=a("<a>").attr("href","javascript:void(0);").attr("id","th-fbm-link").addClass("th-right-panel-link th-fbm-link").html("<span'>Feedback</span>").click(function(){b.renderRightMenuPanel(b.FBM_LINK,void 0);window.feedback.showForm(CONFIG.fbmSubjectLine?{subject:CONFIG.fbmSubjectLine}:void 0)});var c=a("<div>").addClass("th-link-container th-fbm-link-container");a(c).append(b.FBM_LINK);a(f).append(c)}};
this.setupHelp=function(){b.HELP_LINK=a("<a>").attr("href","javascript:void(0);").attr("id","th-help-link").addClass("th-right-panel-link").click(function(){b.renderRightMenuPanel(b.HELP_LINK,k)});a(b.HELP_LINK).prepend(a("<i>").addClass("fa fa-question-circle help-icon"));k=a("<div>").addClass("th-menu-panel th-help-panel");var c="<span><b>Welcome to NASA's EOSDIS</b></span><p>NASA's Earth Observing System Data and Information System (EOSDIS) is a key core capability in NASA\u2019s Earth Science Data Systems Program for archiving and distributing Earth science data from multiple missions to users. </p> <p>This bar indicates that you are within the EOSDIS enterprise which includes 12 science discipline-oriented Distributed Active Archive Centers (DAACs) supporting diverse user communities in science research, applied science research, applications, as well as the general interested public.</p>";
CONFIG.showDaacLinksPanel&&(c+=" <p><b>Find a DAAC / Other DAACs</b> - Use these links to navigate to any of the 12 EOSDIS DAACs.</p>");CONFIG.showStatusPanel&&(c+=" <div class='bell-icon'></div> <p>View important messages and information about EOSDIS sites.</p>");CONFIG.showFeedbackPanel&&(c+=" <span><b> Feedback </b></span><p> Provide feedback about the site that is currently being viewed. </p>");a(k).append(a("<div>").addClass("th-help-panel-content").html(c));a(b.HELP_LINK).append(k);c=a("<div>").addClass("th-link-container th-help-link-container");
a(c).append(b.HELP_LINK);a(f).append(c)};var s=function(){var a=sessionStorage.getItem("seenEntries");return a=null===a?{}:JSON.parse(a)},y=function(){"true"!=a(g).attr("open")&&(a(g).empty(),CONFIG.statusApiUrl?a.ajax(CONFIG.statusApiUrl+"?domain="+b.THIS_DOMAIN).done(b.processResult).fail(b.handleFailure):console.warn("An empty or null Status App API was provided."))};this.handleFailure=function(a){e=[];b.addStatusEntry(x);b.buildStatusEntries();b.setUnreadCount(0);console.error("ERROR - could not retrieve notifications REASON: ",
a);b.showNotifCircle()};this.processResult=function(c){e=[];var d=0;s();var f=[],g=0;a.each(c.notifications,function(a,c){-1<c.domains.indexOf(b.THIS_DOMAIN)&&"outage"==c.notification_type&&!0===c.critical&&f.push(c);var e=!1;if(c.path){var h=c.path.trim();1<h.length&&0===document.location.pathname.indexOf(h)&&(e=!0)}else e=!0;e&&(g++,e={type:c.notification_type,sortKey:u[c.notification_type],message:c.message,id:c.id,updated_at:c.updated_at},b.addStatusEntry(e),!1==q[e.id].seen&&d++)});if(0<f.length){var f=
f.sort(function(a,b){var c=b.starttime||0,d=(new Date(a.starttime||0)).getTime(),c=(new Date(c)).getTime();return d>c?1:d<c?-1:0}),h=f[0].id;c=e.find(function(a){return a.id==h?!0:!1});c.type="banner";c.sortKey=u.banner}b.setUnreadCount(d);sessionStorage.setItem("seenEntries",JSON.stringify(q));0<d&&sessionStorage.setItem("statusChecked",!1);1>g&&(e=[],b.addStatusEntry(r));b.buildStatusEntries();b.showNotifCircle();0<f.length&&n(f[0])};this.getNotifs=function(){y()}};a.fn.tophat=function(c,t){var n=
a(this).data("instance");if("undefined"===typeof n){var n=new k(this,c),b=n.init();a(b).data("instance",n)}else"string"===typeof c&&("addStatusEntry"===c?(n.addStatusEntry(t),n.buildStatusEntries()):"buildStatusEntries"===c?n.buildStatusEntries():"getNotifs"===c&&n.getNotifs());return this};window.__topHatInit=function(){var c=document.getElementById("earthdata-tophat-script"),k=c.getAttribute("data-current-daac"),n=c.getAttribute("data-hide-daac-links"),b=c.getAttribute("data-show-fbm"),r=c.getAttribute("data-show-status"),
g=c.getAttribute("data-status-polling-interval"),f=c.getAttribute("data-status-api-url"),p=c.getAttribute("data-fbm-subject-line"),h=c.getAttribute("data-layout"),m=c.getAttribute("data-width"),e=c.getAttribute("data-classes"),q=c.getAttribute("data-element-id"),w=c.getAttribute("data-app-title"),x=c.getAttribute("data-app-link"),c={daacLinks:DAAC_LINKS};null!==k&&(c.currentDaac=k);"true"===n&&(c.showDaacLinksPanel=!1);"true"===b&&(c.showFeedbackPanel=!0);"true"===r&&(c.showStatusPanel=!0);null!==
g&&(floatInterval=parseFloat(g),isNaN(floatInterval)||Number.isNaN(floatInterval)||0===floatInterval?c.statusPollingInterval=0:c.statusPollingInterval=floatInterval);null!==f&&(STATUS_API_URL=f);null!==p&&(c.fbmSubjectLine=p);c.statusApiUrl=STATUS_API_URL;c.appTitle=w;c.appLink=x;k="body";null!=q&&(k="#"+q,a(k).empty());a(k).tophat(c);"fixed"===h&&(a(".th-wrapper").css("position",h),a(".th-wrapper").css("width","100%"));var u=0,v=a(".th-help-link-container").offset()||{left:0},s=v.left-m;null!==m&&
(a("#earthdata-tophat2").css("width",m),a(".th-help-panel").css("margin-right",s),a(window).resize(function(){v=a(".th-help-link-container").offset()||{left:0};s=v.left-m;marginRight=s+67;u=a(window).width();u<m?(a("#earthdata-tophat2").css("width","auto"),a(".th-help-panel").css("margin-right","18px")):(a("#earthdata-tophat2").css("width",m),a(".th-help-panel").css("margin-right",marginRight))}).resize());null!=e&&a(".th-wrapper").addClass(e)};a(document).ready(function(){window.__topHatInit()});
"undefined"!==typeof module&&(module.exports=k)}var r=["https://cdn.earthdata.nasa.gov/eui/1.0.6/eui-icon-library.css",document.getElementById("earthdata-tophat-script").src.replace(/tophat2\.js/,"tophat2.css")];"false"!==document.getElementById("earthdata-tophat-script").getAttribute("data-use-fontawesome")&&r.push("https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css");r.forEach(function(a){var k=document.createElement("link");k.href=a;k.rel="stylesheet";k.type="text/css";
document.head.appendChild(k)});r=document.createElement("script");r.setAttribute("src","https://cdn.earthdata.nasa.gov/elibs/jquery/3.5.1/jquery-3.5.1.min.js");document.head.appendChild(r);r.addEventListener("load",function(){var a=jQuery.noConflict(!0);w(a)});document.__JQUERY__&&w(document.__JQUERY__)})();
