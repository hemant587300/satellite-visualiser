  var feedback=function(){var i=function(e,t){if(t)for(var n in t)e[n]=t[n];return e},o=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1},s=function(e,t){for(var n="",i=0;i<e.length;++i)0!=i&&t&&(n+=t),n+=e[i];return n},r=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else{if(!e.attachEvent)throw"Could not subscribe to event "+t;e.attachEvent("on"+t,n)}},e=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},a=function(e){return e.trim?e.trim():e.match(/^\s*(.*?)\s*$/)[1]},t=function(e,t){return classes=(e.className||"").split(/\s+/),-1==o(classes,t)&&(classes.push(t),e.className=a(s(classes," ")),!0)},n=function(e,t){classes=(e.className||"").split(/\s+/);var n=o(classes,t);return-1<n&&(classes.splice(n,1),e.className=a(s(classes," ")),!0)},d={initialMouseX:undefined,initialMouseY:undefined,startX:undefined,startY:undefined,draggedObject:undefined,initElement:function(e){"string"==typeof e&&(e=document.getElementById(e)),r(e,"mousedown",d.startDragMouse)},startDragMouse:function(e){d.startDrag(this);e||window.event;var t=d.getEventPosition(e);return d.initialMouseX=t.pageX,d.initialMouseY=t.pageY,r(document,"mousemove",d.dragMouse),r(document,"mouseup",d.releaseElement),!1},startDrag:function(e){d.draggedObject&&d.releaseElement(),d.startX=e.getBoundingClientRect().left,d.startY=e.getBoundingClientRect().top,d.draggedObject=e,t(e,"dragged")},dragMouse:function(e){e||window.event;var t=d.getEventPosition(e),n=t.pageX-d.initialMouseX,i=t.pageY-d.initialMouseY;return d.setPosition(n,i),!1},setPosition:function(e,t){var n=d.startX+e,i=d.startY+t;n=n<0?0:n,i=i<0?0:i,d.draggedObject.style.left=n+"px",d.draggedObject.style.top=i+"px"},releaseElement:function(){e(document,"mousemove",d.dragMouse),e(document,"mouseup",d.releaseElement),n(d.draggedObject,"dragged"),d.draggedObject=null},getEventPosition:function(e){var t=e.pageX,n=e.pageY;return t===undefined&&(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),{pageX:t,pageY:n}}},c=function(e){this.options=i({formUrl:"https://fbm.earthdata.nasa.gov/tickets/new?app_name=LAADS&token=%242a%2406%24.31.MuA.0Y9PrjcemT2t5OoFHm4HM1YtRXs5%2FYrhqhNoCvteTjsZ6",iconUrl:"https://fbm.earthdata.nasa.gov/assets/earthdata-feedback-48a4d0b23bfa2a48393cd949961f824803cd84d4e5a3ba298fbfddceed7c284d.png",dialogHeight:376,dialogWidth:664,showIcon:!0},e);var t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href="https://fbm.earthdata.nasa.gov/for/LAADS/feedback.css";var n=document.getElementsByTagName("head");0<n.length&&n[0].appendChild(t),r(window,"message",this._bind(this._onDialogEvent)),this.options.showIcon&&this.showIcon()};c.prototype.closeForm=function(){this._container&&(this._container.style.display="none",this._iframe.src=this._getFormUrl(),n(this._dialog,"open"),n(this._dialog,"minimized"))},c.prototype.showForm=function(e){this._getContainer().style.display="block",window.setTimeout(this._bind(function(){t(this._dialog,"open")}),0),this._iframe.onload=this._bind(function(e){"load"===e.type&&(this._iframe.contentWindow.focus(),this._iframe.onload=null)}),this._iframe.src=this._getFormUrl(e),d.initElement("feedback-dialog")};var l=function(){var e=document.documentElement.clientHeight;return e===document.documentElement.scrollHeight&&(e=document.body.clientHeight),e};c.prototype.showIcon=function(){var t=this._createIcon();document.body.appendChild(t),this._resize("icon",this._bind(function(){var e=window.innerHeight||l();t.style.top=e/2-t.clientHeight/2+"px"})),t.onclick=this._bind(function(e){this.showForm(),e.preventDefault()})},c.prototype._bind=function(e){var t=this;return Function.prototype.bind?e.bind(t):function(){e.apply(t,arguments)}},c.prototype._createIcon=function(){var e=document.createElement("a");e.href="javascript:;",e.id="feedback-link",e.setAttribute("role","button"),e.setAttribute("aria-label","Open the feedback form");var t=document.createElement("img");return t.id="feedback-icon",t.alt="Feedback",t.title="Feedback",t.src=this.options.iconUrl,e.appendChild(t),e},c.prototype._getBrowserDetails=function(){return{agent:navigator.userAgent,href:window.location.href,screenWidth:screen.width,screenHeight:screen.height,pageWidth:document.documentElement.clientWidth,pageHeight:document.documentElement.clientHeight}},c.prototype._getContainer=function(){if(this._container)return this._container;var e=document.createElement("DIV");e.id="feedback-container";var t=document.createElement("DIV");t.id="feedback-overlay",e.appendChild(t);var n=document.createElement("DIV");n.id="feedback-dialog",this._resize("dialog",this._bind(function(){var e=window.innerHeight||l();n.style.top=e/2-this.options.dialogHeight/2+"px",n.style.left=document.documentElement.clientWidth/2-this.options.dialogWidth/2+"px"})),e.appendChild(n);var i=document.createElement("DIV");i.id="feedback-header",n.appendChild(i);var o=document.createElement("A");o.appendChild(document.createTextNode("Close")),o.href="javascript:;",o.title="Close",o.setAttribute("role","button"),o.setAttribute("aria-label","Close the feedback form"),o.onclick=this._bind(this.closeForm),i.appendChild(o);var s=document.createElement("IFRAME");s.id="feedback-iframe",s.scrolling="yes",s.frameBorder=0,n.appendChild(s),this._iframe=s;var r=document.createElement("BUTTON");return r.id="feedback-button-close",r.setAttribute("aria-label","Close the feedback form"),r.appendChild(document.createTextNode("OK")),r.onclick=this._bind(this.closeForm),n.appendChild(r),this._container=e,this._dialog=n,this._close=o,document.body.appendChild(this._container),this._container},c.prototype._getFormUrl=function(e){var t=this._getBrowserDetails();e&&(e.title&&(t.title=e.title),e.custom_note&&(t.custom_note=e.custom_note),e.subject&&(t.subject=e.subject),e.details&&(t.details=e.details),e.metadata&&Object.keys(e.metadata).length&&(t.metadata=JSON.stringify(e.metadata)));var n=this.options.formUrl;for(var i in t)n+="&",n+=encodeURIComponent(i)+"="+encodeURIComponent(t[i]);return n},c.prototype._onDialogEvent=function(e){"feedback.dialog.onSuccess"===e.data&&this._showCloseButton()},c.prototype._onResize=function(e){e(),window.onresize?(origOnResize=window.onresize,window.onresize=function(){origOnResize(),e()}):window.onresize=e},c.prototype._resize=function(e,t){if(t(),this._resizeBindings||(this._resizeBindings={}),this._resizeBindings[e]=t,!this._resizeIsBound){var n=this,i=this._bind(function(){for(var e in n._resizeBindings)n._resizeBindings[e]()});window.onresize?(origOnResize=window.onresize,window.onresize=function(){origOnResize(),i()}):window.onresize=i,this._resizeIsBound=!0}},c.prototype._showCloseButton=function(){this._dialog&&this._close&&this._iframe&&(n("open"),t(this._dialog,"minimized"),n(this._dialog,"dragged"))},c.prototype._stopResize=function(){for(var e in arguments)this._resizeBindings&&this._resizeBindings.hasOwnProperty(e)&&delete this._resizeBindings[e]};var u=null;return{init:function(e){return u=new c(e),feedback=u}}}();